<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- 	<link rel="stylesheet" href="style.css"> -->
	<title>Webview</title>
	<h1>Webview Testing</h1>
</head>
<body>
	<button onclick="myFunction()">Start test</button>
	<script>
		var xhttp = new XMLHttpRequest()
		var result = {}
		var url = "http://127.0.0.1:7890/alert"
		function test_confirm() {
	        if (confirm('confirm window')) {
	        	result["confirm"] = 1
	        }
	        else {
	        	result["confirm"] = 0
	        }
    	}
    	function openPopUp() {
			var popup_window=window.open("http://google.com","myWindow","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=yes, width=400, height=400");            
			try {
				popup_window.focus();
				result["window"] = 1   
			}
			catch (e) {
				result['window'] = 0
			}
		}
    	window["cloneOriginAlert"] = alert;
		alert = function (msg, prevent) { 
				if ( typeof prevent !== 'undefined') { return; }
			  		var test = prompt("You wanna see alert ?"); 
				if (test != null) {
					result["alert"] = 1
				} else {
					result["alert"] = 0
				} 
		}  
		function myFunction(){
			test_confirm()	
			alert("Hello bug")
			openPopUp()
			fetch(url, {
				method: 'POST',
				body: JSON.stringify(result),
				headers: {
					'Content-type': 'application/json; charset=UTF-8'
				}
			})
		}
	</script>
</body>
</html>